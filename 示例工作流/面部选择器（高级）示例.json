{"id":"250a7e1d-cce7-4c19-a07f-95f51d91bea0","revision":0,"last_node_id":36,"last_link_id":54,"nodes":[{"id":3,"type":"SAMModelLoader (segment anything)","pos":[40,-570],"size":[300.44464111328125,58],"flags":{},"order":0,"mode":0,"inputs":[{"localized_name":"模型名称","name":"model_name","type":"COMBO","widget":{"name":"model_name"},"link":null}],"outputs":[{"label":"SAM模型","localized_name":"SAM_MODEL","name":"SAM_MODEL","type":"SAM_MODEL","links":[1]}],"properties":{"cnr_id":"comfyui_segment_anything","ver":"ab6395596399d5048639cdab7e44ec9fae857a93","Node name for S&R":"SAMModelLoader (segment anything)","widget_ue_connectable":{}},"widgets_values":["sam_vit_h (2.56GB)"]},{"id":14,"type":"BboxDetectorCombined_v2","pos":[185.519287109375,224.56951904296875],"size":[270,102],"flags":{},"order":7,"mode":0,"inputs":[{"label":"BBox检测","localized_name":"bbox_detector","name":"bbox_detector","type":"BBOX_DETECTOR","link":16},{"label":"图像","localized_name":"image","name":"image","type":"IMAGE","link":17},{"localized_name":"阈值","name":"threshold","type":"FLOAT","widget":{"name":"threshold"},"link":null},{"localized_name":"膨胀","name":"dilation","type":"INT","widget":{"name":"dilation"},"link":null}],"outputs":[{"label":"遮罩","localized_name":"遮罩","name":"MASK","type":"MASK","links":[21,47]}],"properties":{"cnr_id":"comfyui-impact-pack","ver":"8.22.0","Node name for S&R":"BboxDetectorCombined_v2","widget_ue_connectable":{}},"widgets_values":[0.5,4]},{"id":4,"type":"GroundingDinoModelLoader (segment anything)","pos":[40,-410],"size":[314.1745910644531,58],"flags":{},"order":2,"mode":0,"inputs":[{"localized_name":"模型名称","name":"model_name","type":"COMBO","widget":{"name":"model_name"},"link":null}],"outputs":[{"label":"G-Dino模型","localized_name":"GROUNDING_DINO_MODEL","name":"GROUNDING_DINO_MODEL","type":"GROUNDING_DINO_MODEL","links":[2]}],"properties":{"cnr_id":"comfyui_segment_anything","ver":"ab6395596399d5048639cdab7e44ec9fae857a93","Node name for S&R":"GroundingDinoModelLoader (segment anything)","widget_ue_connectable":{}},"widgets_values":["GroundingDINO_SwinT_OGC (694MB)"]},{"id":2,"type":"GroundingDinoSAMSegment (segment anything)","pos":[426.9360046386719,-620.1928100585938],"size":[270,122],"flags":{},"order":6,"mode":0,"inputs":[{"label":"SAM模型","localized_name":"sam_model","name":"sam_model","type":"SAM_MODEL","link":1},{"label":"G-Dino模型","localized_name":"grounding_dino_model","name":"grounding_dino_model","type":"GROUNDING_DINO_MODEL","link":2},{"label":"图像","localized_name":"image","name":"image","type":"IMAGE","link":3},{"localized_name":"提示词","name":"prompt","type":"STRING","widget":{"name":"prompt"},"link":null},{"localized_name":"阈值","name":"threshold","type":"FLOAT","widget":{"name":"threshold"},"link":null}],"outputs":[{"label":" 图像","localized_name":"图像","name":"IMAGE","type":"IMAGE","links":[]},{"label":"遮罩","localized_name":"遮罩","name":"MASK","type":"MASK","links":[11,13]}],"properties":{"cnr_id":"comfyui_segment_anything","ver":"ab6395596399d5048639cdab7e44ec9fae857a93","Node name for S&R":"GroundingDinoSAMSegment (segment anything)","widget_ue_connectable":{}},"widgets_values":["face",0.3]},{"id":23,"type":"面部粘贴","pos":[1707.9166259765625,-112.13063049316406],"size":[141,86],"flags":{},"order":16,"mode":0,"inputs":[{"label":"原图","localized_name":"原图","name":"原图","type":"IMAGE","link":29},{"label":"裁剪图像","localized_name":"裁剪图像","name":"裁剪图像","type":"IMAGE","link":49},{"label":"裁剪数据","localized_name":"裁剪数据","name":"裁剪数据","type":"FACE_CROP_DATA","link":50},{"label":"裁剪遮罩","localized_name":"裁剪遮罩","name":"裁剪遮罩","type":"MASK","link":51}],"outputs":[{"label":"输出图像","localized_name":"输出图像","name":"输出图像","type":"IMAGE","links":[30]}],"properties":{"Node name for S&R":"面部粘贴","widget_ue_connectable":{}},"widgets_values":[]},{"id":25,"type":"PreviewImage","pos":[1870.077392578125,-699.6609497070312],"size":[715.1172485351562,525.6141357421875],"flags":{},"order":17,"mode":0,"inputs":[{"label":"图像","localized_name":"图像","name":"images","type":"IMAGE","link":31}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.47","Node name for S&R":"PreviewImage","widget_ue_connectable":{}},"widgets_values":[]},{"id":24,"type":"PreviewImage","pos":[1904.8780517578125,-58.08946990966797],"size":[715.1172485351562,525.6141357421875],"flags":{},"order":18,"mode":0,"inputs":[{"label":"图像","localized_name":"图像","name":"images","type":"IMAGE","link":30}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.47","Node name for S&R":"PreviewImage","widget_ue_connectable":{}},"widgets_values":[]},{"id":13,"type":"MaskPreview","pos":[446.0714416503906,-425.8738708496094],"size":[344.9858703613281,320.0372314453125],"flags":{},"order":9,"mode":0,"inputs":[{"label":"mask","localized_name":"mask","name":"mask","type":"MASK","link":11}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.47","Node name for S&R":"MaskPreview","widget_ue_connectable":{}},"widgets_values":[]},{"id":15,"type":"UltralyticsDetectorProvider","pos":[185.519287109375,84.56951141357422],"size":[270,78],"flags":{},"order":3,"mode":0,"inputs":[{"localized_name":"模型名称","name":"model_name","type":"COMBO","widget":{"name":"model_name"},"link":null}],"outputs":[{"label":"BBox检测","localized_name":"BBOX_DETECTOR","name":"BBOX_DETECTOR","type":"BBOX_DETECTOR","links":[16]},{"label":"SEGM检测","localized_name":"SEGM_DETECTOR","name":"SEGM_DETECTOR","type":"SEGM_DETECTOR","links":null}],"properties":{"cnr_id":"comfyui-impact-subpack","ver":"1.3.5","Node name for S&R":"UltralyticsDetectorProvider","widget_ue_connectable":{}},"widgets_values":["bbox/face_yolov8m.pt"]},{"id":17,"type":"MaskPreview","pos":[479.643798828125,52.61100387573242],"size":[370.834716796875,317.1855163574219],"flags":{},"order":11,"mode":0,"inputs":[{"label":"mask","localized_name":"mask","name":"mask","type":"MASK","link":21}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.47","Node name for S&R":"MaskPreview","widget_ue_connectable":{}},"widgets_values":[]},{"id":19,"type":"PreviewImage","pos":[1201.722900390625,86.1281967163086],"size":[413.8709411621094,306.54071044921875],"flags":{},"order":15,"mode":0,"inputs":[{"label":"图像","localized_name":"图像","name":"images","type":"IMAGE","link":48}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.47","Node name for S&R":"PreviewImage","widget_ue_connectable":{}},"widgets_values":[]},{"id":26,"type":"面部粘贴","pos":[1687.4246826171875,-485.1758728027344],"size":[141,86],"flags":{},"order":14,"mode":0,"inputs":[{"label":"原图","localized_name":"原图","name":"原图","type":"IMAGE","link":35},{"label":"裁剪图像","localized_name":"裁剪图像","name":"裁剪图像","type":"IMAGE","link":34},{"label":"裁剪数据","localized_name":"裁剪数据","name":"裁剪数据","type":"FACE_CROP_DATA","link":32},{"label":"裁剪遮罩","localized_name":"裁剪遮罩","name":"裁剪遮罩","type":"MASK","link":33}],"outputs":[{"label":"输出图像","localized_name":"输出图像","name":"输出图像","type":"IMAGE","links":[31]}],"properties":{"Node name for S&R":"面部粘贴","widget_ue_connectable":{}},"widgets_values":[]},{"id":5,"type":"LoadImage","pos":[-547.6835327148438,-288.86920166015625],"size":[675.9588012695312,676.3099365234375],"flags":{},"order":4,"mode":0,"inputs":[{"localized_name":"图像","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"localized_name":"选择文件上传","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"label":"图像","localized_name":"图像","name":"IMAGE","type":"IMAGE","links":[3,15,17,29,35,46]},{"label":"遮罩","localized_name":"遮罩","name":"MASK","type":"MASK","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.47","Node name for S&R":"LoadImage","widget_ue_connectable":{}},"widgets_values":["9e7bb4e75d1d4b178c5b4c772edd53c6.webp","image"]},{"id":8,"type":"PreviewImage","pos":[1168.4207763671875,-664.1284790039062],"size":[499.1664733886719,515.083740234375],"flags":{},"order":13,"mode":0,"inputs":[{"label":"图像","localized_name":"图像","name":"images","type":"IMAGE","link":7}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.47","Node name for S&R":"PreviewImage","widget_ue_connectable":{}},"widgets_values":[]},{"id":7,"type":"面部选择器高级","pos":[845.565185546875,-514.4193115234375],"size":[270,266],"flags":{},"order":10,"mode":0,"inputs":[{"label":"图像","localized_name":"图像","name":"图像","type":"IMAGE","link":15},{"label":"辅助遮罩","localized_name":"辅助遮罩","name":"辅助遮罩","shape":7,"type":"MASK","link":13},{"label":"区分男女","localized_name":"区分男女","name":"区分男女","type":"COMBO","widget":{"name":"区分男女"},"link":null},{"label":"人物排序","localized_name":"人物排序","name":"人物排序","type":"COMBO","widget":{"name":"人物排序"},"link":null},{"label":"输出索引","localized_name":"输出索引","name":"输出索引","type":"INT","widget":{"name":"输出索引"},"link":null},{"label":"最小尺寸","localized_name":"最小尺寸","name":"最小尺寸","type":"INT","widget":{"name":"最小尺寸"},"link":null},{"label":"置信度阈值","localized_name":"置信度阈值","name":"置信度阈值","type":"FLOAT","widget":{"name":"置信度阈值"},"link":null},{"label":"裁剪系数","localized_name":"裁剪系数","name":"裁剪系数","type":"FLOAT","widget":{"name":"裁剪系数"},"link":null},{"label":"是否旋转面部","localized_name":"是否旋转面部","name":"是否旋转面部","type":"BOOLEAN","widget":{"name":"是否旋转面部"},"link":null},{"label":"deepface_model","localized_name":"deepface_model","name":"deepface_model","shape":7,"type":"COMBO","widget":{"name":"deepface_model"},"link":null},{"label":"InsightFace","localized_name":"InsightFace","name":"InsightFace","shape":7,"type":"INSIGHTFACE","link":null}],"outputs":[{"label":"裁剪图像","localized_name":"裁剪图像","name":"裁剪图像","type":"IMAGE","links":[7,34]},{"label":"裁剪数据","localized_name":"裁剪数据","name":"裁剪数据","type":"FACE_CROP_DATA","links":[32]},{"label":"裁剪遮罩","localized_name":"裁剪遮罩","name":"裁剪遮罩","type":"MASK","links":[33]}],"properties":{"Node name for S&R":"面部选择器高级","widget_ue_connectable":{}},"widgets_values":["不区分","像素占比",0,50,0.5,1.5,false,"VGG-Face"],"color":"#232","bgcolor":"#353"},{"id":35,"type":"面部选择器高级","pos":[890.0575561523438,-26.798877716064453],"size":[270,266],"flags":{},"order":12,"mode":0,"inputs":[{"label":"图像","localized_name":"图像","name":"图像","type":"IMAGE","link":46},{"label":"辅助遮罩","localized_name":"辅助遮罩","name":"辅助遮罩","shape":7,"type":"MASK","link":47},{"label":"区分男女","localized_name":"区分男女","name":"区分男女","type":"COMBO","widget":{"name":"区分男女"},"link":null},{"label":"人物排序","localized_name":"人物排序","name":"人物排序","type":"COMBO","widget":{"name":"人物排序"},"link":null},{"label":"输出索引","localized_name":"输出索引","name":"输出索引","type":"INT","widget":{"name":"输出索引"},"link":null},{"label":"最小尺寸","localized_name":"最小尺寸","name":"最小尺寸","type":"INT","widget":{"name":"最小尺寸"},"link":null},{"label":"置信度阈值","localized_name":"置信度阈值","name":"置信度阈值","type":"FLOAT","widget":{"name":"置信度阈值"},"link":null},{"label":"裁剪系数","localized_name":"裁剪系数","name":"裁剪系数","type":"FLOAT","widget":{"name":"裁剪系数"},"link":null},{"label":"是否旋转面部","localized_name":"是否旋转面部","name":"是否旋转面部","type":"BOOLEAN","widget":{"name":"是否旋转面部"},"link":null},{"label":"deepface_model","localized_name":"deepface_model","name":"deepface_model","shape":7,"type":"COMBO","widget":{"name":"deepface_model"},"link":null}],"outputs":[{"label":"裁剪图像","localized_name":"裁剪图像","name":"裁剪图像","type":"IMAGE","links":[48,49]},{"label":"裁剪数据","localized_name":"裁剪数据","name":"裁剪数据","type":"FACE_CROP_DATA","links":[50]},{"label":"裁剪遮罩","localized_name":"裁剪遮罩","name":"裁剪遮罩","type":"MASK","links":[51]}],"properties":{"Node name for S&R":"面部选择器高级","widget_ue_connectable":{}},"widgets_values":["女","从左向右",1,22,0.5,2,false,"VGG-Face"],"color":"#232","bgcolor":"#353"},{"id":21,"type":"LoadImage","pos":[150,560],"size":[361.0684509277344,394.0299072265625],"flags":{},"order":1,"mode":4,"inputs":[{"localized_name":"图像","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"localized_name":"选择文件上传","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"label":"图像","localized_name":"图像","name":"IMAGE","type":"IMAGE","links":[53]},{"label":"遮罩","localized_name":"遮罩","name":"MASK","type":"MASK","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.47","Node name for S&R":"LoadImage","widget_ue_connectable":{}},"widgets_values":["452467915303730_00001_.png","image"]},{"id":22,"type":"PreviewImage","pos":[989.3585205078125,603.04296875],"size":[209.1812744140625,259.6842041015625],"flags":{},"order":8,"mode":4,"inputs":[{"label":"图像","localized_name":"图像","name":"images","type":"IMAGE","link":54}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.47","Node name for S&R":"PreviewImage","widget_ue_connectable":{}},"widgets_values":[]},{"id":36,"type":"面部选择器","pos":[589.8829956054688,628.9473876953125],"size":[270,218],"flags":{},"order":5,"mode":0,"inputs":[{"label":"图像","localized_name":"图像","name":"图像","type":"IMAGE","link":53},{"label":"人物排序","localized_name":"人物排序","name":"人物排序","type":"COMBO","widget":{"name":"人物排序"},"link":null},{"label":"输出索引","localized_name":"输出索引","name":"输出索引","type":"INT","widget":{"name":"输出索引"},"link":null},{"label":"最小尺寸","localized_name":"最小尺寸","name":"最小尺寸","type":"INT","widget":{"name":"最小尺寸"},"link":null},{"label":"置信度阈值","localized_name":"置信度阈值","name":"置信度阈值","type":"FLOAT","widget":{"name":"置信度阈值"},"link":null},{"label":"裁剪系数","localized_name":"裁剪系数","name":"裁剪系数","type":"FLOAT","widget":{"name":"裁剪系数"},"link":null},{"label":"是否旋转面部","localized_name":"是否旋转面部","name":"是否旋转面部","type":"BOOLEAN","widget":{"name":"是否旋转面部"},"link":null}],"outputs":[{"label":"裁剪图像","localized_name":"裁剪图像","name":"裁剪图像","type":"IMAGE","links":[54]},{"label":"裁剪数据","localized_name":"裁剪数据","name":"裁剪数据","type":"FACE_CROP_DATA","links":null},{"label":"裁剪遮罩","localized_name":"裁剪遮罩","name":"裁剪遮罩","type":"MASK","links":null}],"properties":{"widget_ue_connectable":{},"Node name for S&R":"面部选择器"},"widgets_values":["从左向右",1,50,0.5,3,false],"color":"#232","bgcolor":"#353"}],"links":[[1,3,0,2,0,"SAM_MODEL"],[2,4,0,2,1,"GROUNDING_DINO_MODEL"],[3,5,0,2,2,"IMAGE"],[7,7,0,8,0,"IMAGE"],[11,2,1,13,0,"MASK"],[13,2,1,7,1,"MASK"],[15,5,0,7,0,"IMAGE"],[16,15,0,14,0,"BBOX_DETECTOR"],[17,5,0,14,1,"IMAGE"],[21,14,0,17,0,"MASK"],[29,5,0,23,0,"IMAGE"],[30,23,0,24,0,"IMAGE"],[31,26,0,25,0,"IMAGE"],[32,7,1,26,2,"FACE_CROP_DATA"],[33,7,2,26,3,"MASK"],[34,7,0,26,1,"IMAGE"],[35,5,0,26,0,"IMAGE"],[46,5,0,35,0,"IMAGE"],[47,14,0,35,1,"MASK"],[48,35,0,19,0,"IMAGE"],[49,35,0,23,1,"IMAGE"],[50,35,1,23,2,"FACE_CROP_DATA"],[51,35,2,23,3,"MASK"],[53,21,0,36,0,"IMAGE"],[54,36,0,22,0,"IMAGE"]],"groups":[],"config":{},"extra":{"ue_links":[],"links_added_by_ue":[],"ds":{"scale":0.8769226950000031,"offset":[467.27289372691826,195.7673903675195]}},"version":0.4}